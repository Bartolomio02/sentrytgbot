import requests
import datetime

url = 'https://1bab-188-163-28-144.ngrok.io'
headers = {'Content-type': 'application/json', 'Accept': 'text/plain'}

data = {"event_id":"1d69b27cdbc04bb0b28c5224e0e4fc2c","project":4505029075468288,"release":"dev-master@b93c116","dist":'null',"platform":"php","message":"paymentRequestProcessAction: No free requisite found","datetime":"2023-11-10T11:54:41+00:00","tags":[["browser","Samsung Internet 22.0"],["browser.name","Samsung Internet"],["client_os","Android 13"],["client_os.name","Android"],["device","SM-A525F"],["device.family","Samsung SM-A525F"],["environment","prod"],["level","fatal"],["logger","monolog.app"],["os","Linux 5.10.0-23-amd64"],["os.name","Linux"],["route","payment_request_process"],["runtime","php 8.2.11"],["runtime.name","php"],["release","dev-master@b93c116"],["server_name","2deb964d37fe"],["url","https://vovanpay.com/payment-request/59cfa6ff-c0bc-5ad2-9a06-91c11521b7c8/process/SBER"]],"_metrics":{"bytes.ingested.event":6953,"bytes.stored.event":8245},"contexts":{"browser":{"name":"Samsung Internet","version":"22.0","type":"browser"},"client_os":{"name":"Android","version":"13","type":"os"},"device":{"name":"Galaxy A52","family":"Samsung SM-A525F","model":"SM-A525F","brand":"Samsung","type":"device"},"os":{"name":"Linux","version":"5.10.0-23-amd64","build":"#1 SMP Debian 5.10.179-1 (2023-05-12)","kernel_version":"Linux 2deb964d37fe 5.10.0-23-amd64 #1 SMP Debian 5.10.179-1 (2023-05-12) x86_64","type":"os"},"runtime":{"name":"php","version":"8.2.11","type":"runtime"},"trace":{"trace_id":"91458e86c1c3438c8a13206d5489afe4","span_id":"19cc1427814a47c9","op":"http.server","status":"unknown","tags":{"http.flavor":"1.1","http.method":"GET","http.url":"https://vovanpay.com/payment-request/59cfa6ff-c0bc-5ad2-9a06-91c11521b7c8/process/SBER","net.host.name":"vovanpay.com","net.host.port":"443","route":"payment_request_process"},"type":"trace"}},"culprit":"https://vovanpay.com/payment-request/59cfa6ff-c0bc-5ad2-9a06-91c11521b7c8/process/SBER","environment":"prod","extra":{"monolog.channel":"app","monolog.level":"CRITICAL"},"fingerprint":["{{ default }}"],"grouping_config":{"enhancements":"eJybzDRxc15qeXFJZU6qlZGBkbGugaGuoeEEAHJMCAM","id":"newstyle:2023-01-11"},"hashes":["b4e0a0e73bc0235206863c66c90fcff5"],"ingest_path":[{"version":"23.10.1","public_key":"XE7QiyuNlja9PZ7I9qJlwQotzecWrUIN91BAO7Q5R38"}],"key_id":"3092499","level":"fatal","logentry":{"formatted":"paymentRequestProcessAction: No free requisite found"},"logger":"monolog.app","metadata":{"title":"paymentRequestProcessAction: No free requisite found"},"modules":{"__root__":"dev-master@b93c116","clue/stream-filter":"v1.6.0","cron/cron":"1.8.1","cron/cron-bundle":"2.10.3","damienharper/auditor":"2.4.7","damienharper/auditor-bundle":"5.2.4","doctrine/annotations":"2.0.1","doctrine/cache":"2.2.0","doctrine/collections":"2.1.3","doctrine/common":"3.4.3","doctrine/dbal":"3.6.6","doctrine/deprecations":"v1.1.1","doctrine/doctrine-bundle":"2.10.2","doctrine/doctrine-migrations-bundle":"3.2.4","doctrine/event-manager":"2.0.0","doctrine/inflector":"2.0.8","doctrine/instantiator":"2.0.0","doctrine/lexer":"2.1.0","doctrine/migrations":"3.6.0","doctrine/orm":"2.16.1","doctrine/persistence":"3.2.0","doctrine/sql-formatter":"1.1.3","egulias/email-validator":"4.0.1","ezyang/htmlpurifier":"v4.16.0","giggsey/libphonenumber-for-php":"8.13.19","giggsey/locale":"2.4","guzzlehttp/guzzle":"7.8.0","guzzlehttp/promises":"2.0.1","guzzlehttp/psr7":"2.6.1","http-interop/http-factory-guzzle":"1.2.0","influxdata/influxdb-client-php":"3.4.0","jean85/pretty-package-versions":"2.0.5","jms/metadata":"2.8.0","jms/serializer":"3.27.0","jms/serializer-bundle":"5.3.1","maennchen/zipstream-php":"v2.4.0","markbaker/complex":"3.0.2","markbaker/matrix":"3.0.1","monolog/monolog":"3.4.0","myclabs/php-enum":"1.8.4","nelmio/api-doc-bundle":"v4.12.0","nelmio/cors-bundle":"2.3.1","odolbeau/phone-number-bundle":"v3.9.2","php-amqplib/php-amqplib":"v2.12.1","php-http/client-common":"2.7.0","php-http/discovery":"1.19.1","php-http/httplug":"2.4.0","php-http/message":"1.16.0","php-http/message-factory":"1.1.0","php-http/promise":"1.1.0","phpdocumentor/reflection-common":"2.2.0","phpdocumentor/reflection-docblock":"5.3.0","phpdocumentor/type-resolver":"1.7.3","phpoffice/phpspreadsheet":"1.29.0","phpseclib/phpseclib":"2.0.44","phpstan/phpdoc-parser":"1.23.1","psr/cache":"3.0.0","psr/clock":"1.0.0","psr/container":"2.0.2","psr/event-dispatcher":"1.0.0","psr/http-client":"1.0.2","psr/http-factory":"1.0.2","psr/http-message":"1.1","psr/link":"2.0.1","psr/log":"3.0.0","psr/simple-cache":"3.0.0","ralouphie/getallheaders":"3.0.3","scienta/doctrine-json-functions":"5.3.0","sentry/sdk":"3.5.0","sentry/sentry":"3.21.0","sentry/sentry-symfony":"4.10.0","symfony/asset":"v6.3.0","symfony/cache":"v6.3.4","symfony/cache-contracts":"v3.3.0","symfony/clock":"v6.3.4","symfony/config":"v6.3.2","symfony/console":"v6.3.4","symfony/dependency-injection":"v6.3.4","symfony/deprecation-contracts":"v3.3.0","symfony/doctrine-bridge":"v6.3.4","symfony/doctrine-messenger":"v6.3.1","symfony/error-handler":"v6.3.2","symfony/event-dispatcher":"v6.3.2","symfony/event-dispatcher-contracts":"v3.3.0","symfony/expression-language":"v6.3.0","symfony/filesystem":"v6.3.1","symfony/finder":"v6.3.3","symfony/flex":"v2.3.3","symfony/form":"v6.3.2","symfony/framework-bundle":"v6.3.4","symfony/http-client":"v6.3.2","symfony/http-client-contracts":"v3.3.0","symfony/http-foundation":"v6.3.4","symfony/http-kernel":"v6.3.4","symfony/intl":"v6.3.2","symfony/lock":"v6.3.2","symfony/mailer":"v6.3.0","symfony/messenger":"v6.3.4","symfony/mime":"v6.3.3","symfony/monolog-bridge":"v6.3.1","symfony/monolog-bundle":"v3.8.0","symfony/notifier":"v6.3.0","symfony/options-resolver":"v6.3.0","symfony/password-hasher":"v6.3.0","symfony/polyfill-intl-grapheme":"v1.27.0","symfony/polyfill-intl-icu":"v1.27.0","symfony/polyfill-intl-idn":"v1.27.0","symfony/polyfill-intl-normalizer":"v1.27.0","symfony/polyfill-mbstring":"v1.27.0","symfony/polyfill-php83":"v1.27.0","symfony/polyfill-uuid":"v1.27.0","symfony/process":"v6.3.4","symfony/property-access":"v6.3.2","symfony/property-info":"v6.3.0","symfony/psr-http-message-bridge":"v2.3.1","symfony/rate-limiter":"v6.3.2","symfony/routing":"v6.3.3","symfony/runtime":"v6.3.2","symfony/security-bundle":"v6.3.4","symfony/security-core":"v6.3.3","symfony/security-csrf":"v6.3.2","symfony/security-http":"v6.3.4","symfony/serializer":"v6.3.4","symfony/service-contracts":"v3.3.0","symfony/stopwatch":"v6.3.0","symfony/string":"v6.3.2","symfony/translation":"v6.3.3","symfony/translation-contracts":"v3.3.0","symfony/twig-bridge":"v6.3.2","symfony/twig-bundle":"v6.3.0","symfony/uid":"v6.3.0","symfony/validator":"v6.3.4","symfony/var-dumper":"v6.3.4","symfony/var-exporter":"v6.3.4","symfony/web-link":"v6.3.0","symfony/yaml":"v6.3.3","twig/extra-bundle":"v3.7.0","twig/intl-extra":"v3.7.0","twig/twig":"v3.7.0","webmozart/assert":"1.11.0","zircote/swagger-php":"4.7.11"},"nodestore_insert":1699617286.07665,"received":1699617284.718237,"request":{"url":"https://vovanpay.com/payment-request/59cfa6ff-c0bc-5ad2-9a06-91c11521b7c8/process/SBER","method":"GET","headers":[["Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7"],["Accept-Encoding","gzip, deflate, br"],["Accept-Language","ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7"],["Content-Length",""],["Content-Type",""],["Dnt","1"],["Host","vovanpay.com"],["Referer","https://vovanpay.com/payment-request/59cfa6ff-c0bc-5ad2-9a06-91c11521b7c8"],["Sec-Fetch-Dest","document"],["Sec-Fetch-Mode","navigate"],["Sec-Fetch-Site","same-origin"],["Sec-Fetch-User","?1"],["Upgrade-Insecure-Requests","1"],["User-Agent","Mozilla/5.0 (Linux; Android 13; SAMSUNG SM-A525F) AppleWebKit/537.36 (KHTML, like Gecko) SamsungBrowser/22.0 Chrome/111.0.5563.116 Mobile Safari/537.36"],["X-Forwarded-For","[Filtered]"],["X-Forwarded-Host","vovanpay.com"],["X-Forwarded-Port","443"],["X-Forwarded-Proto","https"],["X-Forwarded-Server","a71b64b3bc64"],["X-Php-Ob-Level","0"],["X-Real-Ip","[Filtered]"]]},"sdk":{"name":"sentry.php.symfony","version":"4.10.0"},"timestamp":1699617281.102141,"title":"paymentRequestProcessAction: No free requisite found","type":"default","version":"7","location": 'null'}
r = requests.post(url, headers=headers, json=data)
print(r.status_code)

message = data['message']
# host = data['net.host.name']
host = data['request']['headers'][6][1]
data_time = data['datetime'] # 2023-11-10T11:54:41+00:00
# date_time преобразовать в дд:мм:гг чч:мм:сс gmt+3
data_time = datetime.datetime.strptime(data_time, '%Y-%m-%dT%H:%M:%S+00:00')
data_time = data_time + datetime.timedelta(hours=3)
data_time = data_time.strftime('%d-%m-%Y %H:%M:%S')

print('message', message)
print('host', host)
print('data_time', data_time)

